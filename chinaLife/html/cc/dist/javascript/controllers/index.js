define("controllers/index",["models/index","views/index","common/tool","common/model","common/view"],function(t,s,a){function r(){u.get_header_html(function(t){w.render_header(t)})}function n(){u.get_footer_html(function(t){w.render_footer(t)})}function e(){d.get_list(function(t){x.render_list(t)})}function o(){var t,s,a,r,n={},e=[],o=$(".tabs-wp .tab-bd");c(),o.on("touchstart",function(s){var a=new Date;t=a.getTime(),void 0==f&&(f=0),n.startX=s.touches[0].clientX,n.endX=s.touches[0].clientX,n.prevX=n.startX,n.prevY=s.touches[0].clientY}).on("touchmove",function(t){o.css({"-moz-transition":"none","-webkit-transition":"none","-o-transition":"none","-ms-transition":"none",transition:"none"}),n.endX=t.touches[0].clientX,n.deltaX=t.touches[0].clientX-n.startX+f,n.directionX=t.touches[0].clientX-n.prevX>0?"right":"left",n.directionY=t.touches[0].clientY-n.prevY>0?"bottom":"top",("top"==n.directionY||"bottom"==n.directionY)&&t.preventDefault();var s=-1*$(".tabs-wp .tab-bd").width(),r=$(".tabs-wp .tab-bd").parent().width();if(a=Math.sqrt(Math.pow(Math.abs(n.deltaX),2)),n.deltaX>0)o.css({transform:"translate("+n.deltaX/2+"px, 0px)","-ms-transform":"translate("+n.deltaX/2+"px, 0px)","-moz-transform":"translate("+n.deltaX/2+"px, 0px)","-webkit-transform":"translate("+n.deltaX/2+"px, 0px)","-o-transform":"translate("+n.deltaX/2+"px, 0px)"});else if(n.deltaX-r<s){var e=s+r,i=n.deltaX-(n.deltaX-e)/2;o.css({transform:"translate("+i+"px, 0px)","-ms-transform":"translate("+i+"px, 0px)","-moz-transform":"translate("+i+"px, 0px)","-webkit-transform":"translate("+i+"px, 0px)","-o-transform":"translate("+i+"px, 0px)"})}else o.css({transform:"translate("+n.deltaX+"px, 0px)","-ms-transform":"translate("+n.deltaX+"px, 0px)","-moz-transform":"translate("+n.deltaX+"px, 0px)","-webkit-transform":"translate("+n.deltaX+"px, 0px)","-o-transform":"translate("+n.deltaX+"px, 0px)"})}).on("touchend",function(a){r=Math.sqrt(Math.pow(Math.abs(n.endX-n.startX),2));var c=new Date;s=c.getTime();var l=s-t,m=0;r&&(m=r/l);var b,p=n.deltaX;m>.3?(m+=4,b=r*m,"right"==n.directionX?(p=n.deltaX+b,o.css({"-moz-transition":"-moz-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-webkit-transition":"-webkit-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-o-transition":"-o-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-ms-transition":"-ms-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s",transition:"transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s"}).css({transform:"translate("+p+"px, 0px)","-ms-transform":"translate("+p+"px, 0px)","-moz-transform":"translate("+p+"px, 0px)","-webkit-transform":"translate("+p+"px, 0px)","-o-transform":"translate("+p+"px, 0px)"}),n.deltaX=i(p,a)):"left"==n.directionX&&(p=n.deltaX-b,o.css({"-moz-transition":"-moz-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-webkit-transition":"-webkit-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-o-transition":"-o-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-ms-transition":"-ms-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s",transition:"transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s"}).css({transform:"translate("+p+"px, 0px)","-ms-transform":"translate("+p+"px, 0px)","-moz-transform":"translate("+p+"px, 0px)","-webkit-transform":"translate("+p+"px, 0px)","-o-transform":"translate("+p+"px, 0px)"}),n.deltaX=i(p,a))):n.deltaX=i(p,a),f=n.deltaX,e=[]})}function i(t,s){var a=-1*$(".tabs-wp .tab-bd").width(),r=$(".tabs-wp .tab-bd").parent().width();if(t>0)return $(".tabs-wp .tab-bd").css({"-moz-transition":"-moz-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-webkit-transition":"-webkit-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-o-transition":"-o-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-ms-transition":"-ms-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s",transition:"transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s"}).css({transform:"translate(0px, 0px)","-ms-transform":"translate(0px, 0px)","-moz-transform":"translate(0px, 0px)","-webkit-transform":"translate(0px, 0px)","-o-transform":"translate(0px, 0px)"}),0;if(a>t-r){var n=a+r;return $(".tabs-wp .tab-bd").css({"-moz-transition":"-moz-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-webkit-transition":"-webkit-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-o-transition":"-o-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s","-ms-transition":"-ms-transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s",transition:"transform 0.5625s cubic-bezier(0.33, 0.66, 0.66, 1) 0s"}).css({transform:"translate("+n+"px, 0px)","-ms-transform":"translate("+n+"px, 0px)","-moz-transform":"translate("+n+"px, 0px)","-webkit-transform":"translate("+n+"px, 0px)","-o-transform":"translate("+n+"px, 0px)"}),n}return t}function c(){var t=$(".tabs-wp .tab-bd");$(".tab-new").hasClass("active")&&$(".tabs-wp .tab-bd").css("visibility","visible"),t.children().each(function(){if($(this).hasClass("active")){var t=$(this).offset().left,s=t-$(".tabs-wp .tab-new").width(),a=s-$(".tabs-wp .tab-cnt").width()/2+$(this).width()/2,r=-1*a,n=-1*$(".tabs-wp .tab-bd").width(),e=$(".tabs-wp .tab-bd").parent().width();r>0&&(r=0),n>r-e&&(r=n+e),$(".tabs-wp .tab-bd").css({transform:"translate("+r+"px, 0px)","-ms-transform":"translate("+r+"px, 0px)","-moz-transform":"translate("+r+"px, 0px)","-webkit-transform":"translate("+r+"px, 0px)","-o-transform":"translate("+r+"px, 0px)"}),f=r,$(".tabs-wp .tab-bd").css("visibility","visible")}})}function l(){var t=$("#J_filter"),s=$("#J_tab"),a=$("#J_sortRes"),r=($(".J_tabitem"),null),n=s.children(".item").length;s.on("click",".item",function(){var s=$(this),e=s.index();return e==n-1?void(t.hasClass("show")?(t.removeClass("show"),"分类"==a.text()&&(s.removeClass("on"),r&&r.addClass("on"))):(r=s.siblings(".on"),s.addClass("on").siblings().removeClass("on"),t.addClass("show"))):(a.text("分类"),t.children(".item").removeClass("on"),t.removeClass("show"),s.addClass("on").siblings().removeClass("on"),void 0)})}function m(){$(document).scroll(function(){var t=$(window).scrollTop(),s=$(window).height(),a=$(".shangou_backtop");t>=s?($("#backToTop").attr("style","display:block;"),a&&a.addClass("shangou_backtop_show")):(a&&a.removeClass("shangou_backtop_show"),$("#backToTop").attr("style","display:none;"))})}function b(){var t="";if(""!=t&&null!=t){for(var s=t.split(","),a=s.length,r="",n=0;a>n;n++)r+=","+s[n];var e=r.substring(1,r.length),o={skuids:e,type:1,origin:2};d.get_price_data(o,function(t){x.render_price(t)})}}function p(){var t="";""!=t&&null!=t&&d.get_stock_data({skuids:t},function(t){x.render_stock(t)})}var f,d=t("models/index"),x=t("views/index"),u=(t("common/tool"),t("common/model")),w=t("common/view");a.exports={create_header:r,create_footer:n,create_list:e,create_tab:o,tab_check:l,back_to_top:m,get_price_info:b,get_stock_info:p}});